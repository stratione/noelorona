---
import { NAV_LINKS, SITE } from "../consts";

const { currentPath } = Astro.props as { currentPath: string };
const homeBase = currentPath === "/" ? "" : "/";
const resolveHref = (href: string) =>
  href.startsWith("#") ? `${homeBase}${href}` : href;
const scholarUrl =
  "https://scholar.google.com/citations?user=Af07_G0AAAAJ&hl=en&oi=ao";
const linkedInUrl = "https://www.linkedin.com/in/dr-noe-lorona-7198181a7/";
const mediumUrl = "https://medium.com/@noelorona";
---
<header class="mx-auto w-full max-w-5xl px-6 pt-10">
  <div class="flex flex-wrap items-center justify-between gap-6">
    <div>
      <a href="/" class="text-2xl font-semibold text-ink">
        <img
          src="/images/logo.png"
          alt="Site logo"
          class="h-20 w-auto"
          width="320"
          height="80"
          loading="eager"
          decoding="async"
        />
      </a>
    </div>
    <nav aria-label="Primary">
      <div class="flex flex-wrap items-center gap-3 text-sm">
        <ul class="flex flex-wrap gap-3">
        {NAV_LINKS.map((link) => (
          <li class={link.children ? "relative group" : undefined}>
            <a
              href={resolveHref(link.href)}
              class="rounded-full border border-slate/40 px-3 py-1 text-ink transition hover:border-marigold hover:bg-marigold/20"
            >
              {link.label}
            </a>
            {link.children && (
              <div class="absolute left-0 z-20 mt-2 hidden min-w-[14rem] rounded-2xl border border-slate/20 bg-haze/95 p-3 shadow-soft backdrop-blur group-hover:block group-focus-within:block">
                <ul class="space-y-2 text-xs text-slate">
                  {link.children.map((child) => (
                    <li>
                      <a
                        href={resolveHref(child.href)}
                        class="block rounded-lg px-2 py-1 text-slate hover:text-ink"
                      >
                        {child.label}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </li>
        ))}
        </ul>
        <div class="flex items-center gap-2">
          <a
            href={scholarUrl}
            aria-label="Google Scholar"
            class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate/30 text-slate transition hover:border-marigold/60 hover:text-ink"
          >
            <svg
              aria-hidden="true"
              viewBox="0 0 24 24"
              class="h-4 w-4 fill-current"
            >
              <path d="M12 3 1.5 8.25 12 13.5l9.5-4.75L12 3Zm0 12.2-5.8-2.9V16c0 2.2 2.6 4 5.8 4s5.8-1.8 5.8-4v-3.7L12 15.2Z" />
            </svg>
          </a>
          <a
            href={linkedInUrl}
            aria-label="LinkedIn"
            class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate/30 text-slate transition hover:border-marigold/60 hover:text-ink"
          >
            <svg aria-hidden="true" viewBox="0 0 24 24" class="h-4 w-4 fill-current">
              <path d="M4.98 3.5C4.98 4.88 3.9 6 2.5 6S0 4.88 0 3.5 1.08 1 2.5 1 4.98 2.12 4.98 3.5ZM0 8h5v16H0V8Zm7.5 0H12v2.2h.1c.6-1.2 2.1-2.5 4.4-2.5 4.7 0 5.6 3.1 5.6 7.2V24h-5V16c0-1.9 0-4.4-2.7-4.4s-3.1 2.1-3.1 4.2V24h-5V8Z" />
            </svg>
          </a>
          <a
            href={mediumUrl}
            aria-label="Medium"
            class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-slate/30 text-slate transition hover:border-marigold/60 hover:text-ink"
          >
            <svg aria-hidden="true" viewBox="0 0 24 24" class="h-4 w-4 fill-current">
              <path d="M4 6h3.2l4.8 9 4.8-9H20v12h-2.5V9.8L13.4 18h-1L6.5 9.8V18H4V6Z" />
            </svg>
          </a>
        </div>
      </div>
    </nav>
  </div>
</header>
